---
// src/components/Navigation.astro
---

<nav class="nav-wrapper">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-20">
      <!-- Logo -->
      <a href="/" class="logo-link group">
        <div class="logo">
          <span class="logo-bracket">&lt;</span>
          <span class="logo-text">Brandon</span>
          <span class="logo-bracket">/&gt;</span>
        </div>
      </a>
      
      <!-- Desktop Menu -->
      <div class="hidden md:flex items-center gap-1">
        <a href="#about" class="nav-link">About</a>
        <a href="#projects" class="nav-link">Work</a>
        <a href="#github" class="nav-link">GitHub</a>
        <a href="#testimonials" class="nav-link">Testimonials</a>
        <a href="#contact" class="nav-link">Contact</a>
      </div>
      
      <!-- CTA Button -->
      <div class="hidden md:block">
        <a href="#contact" class="cta-button">
          <span>Let's Talk</span>
          <svg class="w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </a>
      </div>
      
      <!-- Mobile Menu Button -->
      <button 
        id="mobileMenuBtn" 
        class="md:hidden mobile-menu-btn"
        aria-label="Toggle menu"
      >
        <svg id="menuIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
        <svg id="closeIcon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
  </div>
  
  <!-- Mobile Menu -->
  <div id="mobileMenu" class="mobile-menu">
    <div class="mobile-menu-content">
      <a href="#about" class="mobile-nav-link">About</a>
      <a href="#projects" class="mobile-nav-link">Work</a>
      <a href="#github" class="mobile-nav-link">GitHub</a>
      <a href="#testimonials" class="mobile-nav-link">Testimonials</a>
      <a href="#contact" class="mobile-nav-link">Contact</a>
      <a href="#contact" class="mobile-cta-button">
        Let's Talk
      </a>
    </div>
  </div>
</nav>

<script>
  // Navbar scroll effect
  let lastScroll = 0;
  const nav = document.querySelector('.nav-wrapper') as HTMLElement;
  
  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;
    
    if (currentScroll <= 0) {
      nav?.classList.remove('nav-scrolled');
      return;
    }
    
    if (currentScroll > lastScroll && currentScroll > 100) {
      // Scrolling down
      nav?.classList.add('nav-hidden');
    } else {
      // Scrolling up
      nav?.classList.remove('nav-hidden');
    }
    
    if (currentScroll > 50) {
      nav?.classList.add('nav-scrolled');
    } else {
      nav?.classList.remove('nav-scrolled');
    }
    
    lastScroll = currentScroll;
  });
  
  // Mobile menu toggle
  const mobileMenuBtn = document.getElementById('mobileMenuBtn');
  const mobileMenu = document.getElementById('mobileMenu');
  const menuIcon = document.getElementById('menuIcon');
  const closeIcon = document.getElementById('closeIcon');
  
  mobileMenuBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('mobile-menu-open');
    menuIcon?.classList.toggle('hidden');
    closeIcon?.classList.toggle('hidden');
    document.body.classList.toggle('menu-open');
  });
  
  // Close menu when clicking a link
  const mobileLinks = document.querySelectorAll('.mobile-nav-link, .mobile-cta-button');
  mobileLinks.forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.remove('mobile-menu-open');
      menuIcon?.classList.remove('hidden');
      closeIcon?.classList.add('hidden');
      document.body.classList.remove('menu-open');
    });
  });
  
  // Active link highlighting
  const sections = document.querySelectorAll('section[id]');
  const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');
  
  window.addEventListener('scroll', () => {
    let current = '';
    sections.forEach(section => {
      const sectionTop = section.offsetTop;
      const sectionHeight = section.clientHeight;
      if (window.pageYOffset >= sectionTop - 200) {
        current = section.getAttribute('id') || '';
      }
    });
    
    navLinks.forEach(link => {
      link.classList.remove('nav-link-active');
      if (link.getAttribute('href') === `#${current}`) {
        link.classList.add('nav-link-active');
      }
    });
  });
</script>

<style>
  .nav-wrapper {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 50;
    background: rgba(10, 10, 15, 0.7);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(100, 116, 139, 0.1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .nav-scrolled {
    background: rgba(10, 10, 15, 0.95);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    border-bottom-color: rgba(100, 116, 139, 0.2);
  }
  
  .nav-hidden {
    transform: translateY(-100%);
  }
  
  .logo-link {
    position: relative;
    z-index: 10;
  }
  
  .logo {
    font-size: 1.5rem;
    font-weight: 900;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    transition: all 0.3s ease;
  }
  
  .logo-bracket {
    color: #3b82f6;
    font-weight: 700;
    transition: all 0.3s ease;
  }
  
  .logo-text {
    color: #ffffff;
    letter-spacing: -0.02em;
  }
  
  .logo-link:hover .logo-bracket {
    color: #60a5fa;
    transform: scale(1.1);
  }
  
  .logo-link:hover .logo {
    transform: translateY(-2px);
  }
  
  .nav-link {
    position: relative;
    padding: 0.5rem 1rem;
    color: #cbd5e1;
    font-size: 0.9375rem;
    font-weight: 500;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
  }
  
  .nav-link::before {
    content: '';
    position: absolute;
    bottom: 0.25rem;
    left: 50%;
    transform: translateX(-50%) scaleX(0);
    width: 50%;
    height: 2px;
    background: linear-gradient(90deg, #3b82f6, #06b6d4);
    border-radius: 2px;
    transition: transform 0.3s ease;
  }
  
  .nav-link:hover {
    color: #ffffff;
    background: rgba(59, 130, 246, 0.1);
  }
  
  .nav-link:hover::before,
  .nav-link-active::before {
    transform: translateX(-50%) scaleX(1);
  }
  
  .nav-link-active {
    color: #60a5fa;
  }
  
  .cta-button {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.625rem 1.5rem;
    background: linear-gradient(135deg, #3b82f6, #06b6d4);
    color: #ffffff;
    font-size: 0.9375rem;
    font-weight: 600;
    border-radius: 0.75rem;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  }
  
  .cta-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
  }
  
  .mobile-menu-btn {
    padding: 0.5rem;
    color: #cbd5e1;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
  }
  
  .mobile-menu-btn:hover {
    color: #ffffff;
    background: rgba(59, 130, 246, 0.1);
  }
  
  .mobile-menu {
    position: fixed;
    top: 80px;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(10, 10, 15, 0.98);
    backdrop-filter: blur(20px);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
  }
  
  .mobile-menu-open {
    opacity: 1;
    visibility: visible;
  }
  
  .mobile-menu-content {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 2rem;
    max-width: 600px;
    margin: 0 auto;
  }
  
  .mobile-nav-link {
    padding: 1rem 1.5rem;
    color: #cbd5e1;
    font-size: 1.125rem;
    font-weight: 600;
    border-radius: 0.75rem;
    background: rgba(30, 41, 59, 0.5);
    border: 1px solid rgba(100, 116, 139, 0.2);
    transition: all 0.2s ease;
  }
  
  .mobile-nav-link:hover,
  .mobile-nav-link.nav-link-active {
    color: #ffffff;
    background: rgba(59, 130, 246, 0.2);
    border-color: rgba(59, 130, 246, 0.4);
    transform: translateX(8px);
  }
  
  .mobile-cta-button {
    margin-top: 1rem;
    padding: 1.25rem;
    background: linear-gradient(135deg, #3b82f6, #06b6d4);
    color: #ffffff;
    font-size: 1.125rem;
    font-weight: 700;
    border-radius: 0.75rem;
    text-align: center;
    box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4);
    transition: all 0.3s ease;
  }
  
  .mobile-cta-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 32px rgba(59, 130, 246, 0.5);
  }
  
  body.menu-open {
    overflow: hidden;
  }
  
  @media (max-width: 768px) {
    .logo {
      font-size: 1.25rem;
    }
  }
</style>